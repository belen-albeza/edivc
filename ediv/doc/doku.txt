
Doku

Este es el programa para hacer los documentos de eDIV. Espero que
sepais perdonar el codigo guarrindongo, desordenado y descomentarizado :P
Voy a explicar un poco como funciona:
Los documentos se crean en archivos .dok, que son basicamente archivos
HTML con ciertas directivas especiales encerradas en <% y %> (para
que el dreamweaver los muestre como directivas ASP :) ). SIEMPRE
debe haber un fichero index.dok. Básicamente su estructura es la
siguiente:

<%title%>Titulo del indice<%/title%>
Logo, texto de presentacion, etc
<%index%>
prologo
capitulo1
+parte1
+parte2
++semiacto1
++semiacto2
capitulo2
+parte1
+etc
epilogo
<%/index%>
<%end%>

Yo creo que se entiende ¿no? :P Los signos '+' delante de los apartados
indican los niveles y subniveles. OJO, que lo que se indica en el indice
son NOMBRES DE ARCHIVO .dok sin extension, no los titulos de los apartados.
Asi, el apartado "capitulo1" se leera del fichero capitulo1.dok y generara
un fichero capitulo1.html, aunque este se pueda titular "Capítulo I: El
embargo de Largo" (el titulo se indica dentro de los .dok, entre las
directivas <%title%> y <%/title%>.
La estructura de un .dok que no sea el indice, como podeis imaginar, sera
algo tal que asi:

<%title%>Título del documento<%/title%>
Texto html de lo que quieras explicar ;P
<%end%>

Queda muy bonito poner una directiva <%subindex%> justo antes del <%end%> en
los documentos que tengan sub-apartados, ya que generara un sub-indice de
los mismos, como el SGML ;)
Ah, y en los documentos que no son el indice, se colocan arriba unos enlaces
muy chulos de atrás, siguiente, subir... ¡¡como el SGML!! xDD

EXPLICACION DETALLADA DEL FURRULAMIENTO DE ESTO

- Primero lee el template.txt, donde se definen algunas directivas. Se pueden
  añadir directivas propias al gusto del consumidor ;) hasta un maximo de 20.
  ¡OJO! En el template.txt hay que tener mucho cuidado de no equivocarse con
  la sintaxis, ya que la rutina no advierte de los errores. Para los otros
  ficheros sí se comprueban un poco más, pero no te fíes (¿qué creías? este
  programa está hecho en un par de tardes) :P
- Luego se abre el .dok en cuestion y se sustituyen todas las directivas por
  su texto html correspondiente, tal como lo haria un interprete de PHP o ASP,
  pero mucho mas sencillo, claro. <%title%> inserta el texto que le corresponde
  y luego mete los enlaces de navegacion, si no estamos en el index.dok, Otras
  directivas, como <%index%> o <%subindex%> no sustituyen texto sino que llaman
  a funciones especiales.
- para mas detalles, mira las descripciones de las funciones en el source :P

para pasar todos los dok del directorio a html, hay ke usar el script makedok
(ver leeme-doc.txt). si se modifica el indice, HAY que rular el script para que
todos los enlaces de navegacion se actualicen. Trankilos, el proceso es muy
rapido ;)

Er_Makina

